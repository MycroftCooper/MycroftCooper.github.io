

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="是用来学习的！">
  <meta name="author" content="MycroftCooper">
  <meta name="keywords" content="Mycroft&#39;s Blog">
  <title>游戏网络同步学习 - Mycroft&#39;s Blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->

  
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"mycroftcooper.github.io","root":"/","version":"1.8.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":true},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>卖烤麸烤饼儿的博客</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/daily_news/">
                <i class="iconfont icon-rss"></i>
                每日新闻
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/daily_weather/">
                <i class="iconfont icon-codeforces"></i>
                每日天气
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/postBG.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="游戏网络同步学习">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2024-01-18 00:10" pubdate>
        2024年1月18日 凌晨
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      4.5k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      47
       分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">游戏网络同步学习</h1>
            
            <div class="markdown-body">
              <h1 id="0-学习路径"><a href="#0-学习路径" class="headerlink" title="0. 学习路径"></a>0. 学习路径</h1><ol>
<li><strong>网络编程基础：</strong><ul>
<li>学习基本的网络通信概念，了解TCP/IP和UDP协议。</li>
<li>学习Socket编程，掌握套接字的使用和网络通信的基本原理。</li>
<li>了解网络模型和常见的网络通信模式。</li>
</ul>
</li>
<li><strong>游戏网络同步基础：</strong><ul>
<li>了解游戏网络同步的基本原理，包括客户端-服务器架构和点对点架构。</li>
<li>熟悉帧同步和状态同步的概念。</li>
</ul>
</li>
<li><strong>游戏引擎和框架：</strong><ul>
<li>学习一些流行的游戏引擎，如Unity或Unreal Engine。</li>
<li>掌握该引擎的网络模块和相关API。</li>
</ul>
</li>
<li><strong>多线程编程：</strong><ul>
<li>了解多线程编程的基本概念，学习如何使用线程来处理并发任务。</li>
<li>学习线程同步和互斥机制，以确保线程安全。</li>
</ul>
</li>
<li><strong>同步算法：</strong><ul>
<li>学习关于游戏同步的算法，如时间插值、状态插值、预测性同步等。</li>
<li>了解如何处理网络延迟和抖动。</li>
</ul>
</li>
<li><strong>网络优化：</strong><ul>
<li>学习网络优化技术，减少带宽占用和延迟。</li>
<li>了解并实践压缩和流量控制等技术。</li>
</ul>
</li>
<li><strong>实际项目经验：</strong><ul>
<li>参与小型游戏项目，实践所学知识。</li>
<li>阅读开源游戏项目的源代码，了解实际应用。</li>
</ul>
</li>
</ol>
<h1 id="1-网络编程基础"><a href="#1-网络编程基础" class="headerlink" title="1. 网络编程基础"></a>1. 网络编程基础</h1><h2 id="1-1-网络协议"><a href="#1-1-网络协议" class="headerlink" title="1.1 网络协议"></a>1.1 网络协议</h2><h2 id="1-2-TCP传输控制协议"><a href="#1-2-TCP传输控制协议" class="headerlink" title="1.2 TCP传输控制协议"></a>1.2 TCP传输控制协议</h2><ul>
<li><strong>特点：</strong><ul>
<li>提供可靠的数据传输，确保数据完整无误地到达。</li>
<li>有序传输数据包，维护数据顺序。</li>
<li>自动处理数据包重传和丢失问题。</li>
</ul>
</li>
<li><strong>适用场景：</strong><ul>
<li>当游戏需要可靠的数据传输时，例如在一些需要高度数据一致性的策略游戏或回合制游戏中。</li>
<li>客户端-服务器架构中，尤其是涉及到重要游戏状态和玩家数据的时候，经常使用TCP。</li>
</ul>
</li>
</ul>
<h2 id="1-3-UDP用户数据报协议"><a href="#1-3-UDP用户数据报协议" class="headerlink" title="1.3 UDP用户数据报协议"></a>1.3 UDP用户数据报协议</h2><ul>
<li><strong>特点：</strong><ul>
<li>提供快速的数据传输，但不保证数据包的可靠到达。</li>
<li>不保证数据包的顺序。</li>
<li>无连接，减少数据传输的延迟。</li>
</ul>
</li>
<li><strong>适用场景：</strong><ul>
<li>当游戏需要快速响应和实时更新时，例如在射击游戏或竞速游戏中。</li>
<li>在点对点架构中，尤其是对实时性要求较高的游戏，UDP经常被使用。</li>
</ul>
</li>
</ul>
<h2 id="1-4-结合TCP和UDP"><a href="#1-4-结合TCP和UDP" class="headerlink" title="1.4 结合TCP和UDP"></a>1.4 结合TCP和UDP</h2><p>有些游戏可能会同时使用TCP和UDP，根据不同的需求选择不同的协议。例如，使用TCP来处理登录、聊天和交易等需要高可靠性的数据传输，而使用UDP来处理实时的游戏状态更新。</p>
<h2 id="1-5-其它协议"><a href="#1-5-其它协议" class="headerlink" title="1.5 其它协议"></a>1.5 其它协议</h2><p>除了TCP和UDP，还存在其他一些网络通信协议，但在游戏开发中，TCP和UDP是最常用的。</p>
<p>以下是一些其他协议的简要介绍：</p>
<ol>
<li><strong>HTTP/HTTPS：</strong><ul>
<li>超文本传输协议（HTTP）和其安全版本（HTTPS）通常用于在Web浏览器和服务器之间传输数据。</li>
<li>虽然HTTP不适用于实时性要求高的游戏，但在一些需要通过Web进行访问的游戏和应用中可能会使用。</li>
</ul>
</li>
<li><strong>QUIC（Quick UDP Internet Connections）：</strong><ul>
<li>QUIC是一个基于UDP的传输协议，旨在提供更快的连接建立和更低的延迟。</li>
<li>由Google推出，适用于一些对延迟敏感的应用，但在游戏领域的应用尚不如TCP和UDP广泛。</li>
</ul>
</li>
<li><strong>SCTP（Stream Control Transmission Protocol）：</strong><ul>
<li>SCTP是一个支持可靠和不可靠传输的协议，同时具有多流和多宿主的特性。</li>
<li>SCTP被设计为提供比TCP更好的性能，并提供更好的消息边界控制。</li>
</ul>
</li>
<li><strong>RUDP（Reliable UDP）：</strong><ul>
<li>RUDP是对UDP的扩展，通过在应用层实现可靠性，使UDP具备了类似于TCP的可靠传输特性，但不同于TCP的有序传输。</li>
<li>一些游戏开发者选择在UDP基础上实现自定义的可靠性，以避免TCP的一些缺点，如拥塞控制导致的延迟增加。</li>
</ul>
</li>
</ol>
<h2 id="1-4-Socket"><a href="#1-4-Socket" class="headerlink" title="1.4 Socket"></a>1.4 Socket</h2><p>Socket（套接字）在严格意义上是一种编程接口（API），用于在网络中实现进程间的通信。<br>它可以被看作是一种在应用层和传输层之间的接口，使得程序可以通过网络发送和接收数据。<br>Socket并不是协议，而是一个用于进行网络编程的抽象接口。</p>
<p>在具体实现中，Socket可以使用不同的传输协议，最常见的是TCP和UDP。<br>通过使用Socket API，开发者可以创建套接字并使用它来建立网络连接、发送和接收数据。</p>
<p>在网络同步中，Socket扮演着关键的角色，特别是在实现客户端-服务器模型时。以下是Socket在网络同步中的一些关键作用：</p>
<ol>
<li><strong>建立连接：</strong> Socket用于建立客户端与服务器之间的连接。客户端和服务器分别创建套接字，然后通过Socket建立连接。</li>
<li><strong>数据传输：</strong> 通过Socket，程序可以使用不同的方法（如<code>send</code>和<code>recv</code>）发送和接收数据。这是网络同步中实现信息交换的关键。</li>
<li><strong>实时通信：</strong> 在实时多人游戏中，Socket负责实现玩家之间的实时通信。通过套接字，游戏客户端可以向服务器发送玩家的输入，服务器可以将更新的游戏状态广播给所有连接的客户端。</li>
<li><strong>协议选择：</strong> Socket API允许开发者选择不同的传输协议，如TCP或UDP，根据游戏的需求来确定数据传输的可靠性和效率。</li>
</ol>
<p>总的来说，Socket是一个在网络编程中用于实现通信的工具库（或者说是编程接口），它在网络同步中扮演着连接、数据传输和实时通信等关键角色。通过使用Socket，开发者可以在应用层进行网络编程，实现不同设备之间的数据交换。</p>
<h1 id="2-游戏网络同步基础"><a href="#2-游戏网络同步基础" class="headerlink" title="2. 游戏网络同步基础"></a>2. 游戏网络同步基础</h1><h2 id="2-1-网络同步架构"><a href="#2-1-网络同步架构" class="headerlink" title="2.1 网络同步架构"></a>2.1 网络同步架构</h2><h3 id="2-1-1-客户端-服务端架构"><a href="#2-1-1-客户端-服务端架构" class="headerlink" title="2.1.1 客户端-服务端架构"></a>2.1.1 客户端-服务端架构</h3><h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><p>游戏客户端和服务器之间存在中央服务器，负责处理游戏逻辑和同步状态。<br>客户端发送输入信息到服务器，服务器处理并更新游戏状态，然后将新的状态广播给所有连接的客户端。<br>客户端只负责输入处理和本地预测，而真正的游戏状态由服务器维护。<br>服务器是唯一的权威来源，决定游戏中的事件和状态变化。<br>通信通常使用可靠的传输协议（如TCP）以确保数据完整性。</p>
<h4 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h4><p><strong>优点：</strong></p>
<ul>
<li>中央服务器可以处理作弊和安全性问题，因为它有权力验证和修正客户端的输入。</li>
<li>适用于大型多人在线游戏，可以管理数以千计的玩家。</li>
</ul>
<p><strong>缺点：</strong></p>
<ul>
<li>服务器压力大，可能成为性能瓶颈。</li>
<li>有较高的延迟，因为所有操作都需要经过服务器。</li>
</ul>
<h4 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h4><p>大型多人在线游戏，需要中央权威来确保游戏状态的一致性和防止作弊。</p>
<h4 id="案例游戏"><a href="#案例游戏" class="headerlink" title="案例游戏"></a>案例游戏</h4><ul>
<li><strong>《魔兽世界》（World of Warcraft）</strong>：<br>作为一款经典的大型多人在线角色扮演游戏（MMORPG），《魔兽世界》使用客户端-服务器架构来处理大量玩家的交互和游戏状态更新。</li>
<li><strong>《反恐精英：全球攻势》（Counter-Strike: Global Offensive）</strong>：<br>这是一款流行的第一人称射击游戏，使用客户端-服务器模型来保证游戏的公平性和同步。</li>
<li><strong>《英雄联盟》（League of Legends）</strong>：<br>这款广受欢迎的多人在线战术竞技游戏也采用客户端-服务器架构，服务器负责处理游戏逻辑和同步玩家状态。</li>
</ul>
<h3 id="2-1-2-点对点架构"><a href="#2-1-2-点对点架构" class="headerlink" title="2.1.2 点对点架构"></a>2.1.2 点对点架构</h3><h4 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h4><p>每个玩家都有一个独立的客户端，彼此直接通信。<br>每个客户端处理自身的输入和状态更新，并将这些信息发送给其他玩家。<br>没有中央服务器，玩家直接交换信息，共同维护游戏状态。<br>每个客户端对自身状态的变化有权威性。<br>通信通常使用UDP</p>
<h4 id="优缺点-1"><a href="#优缺点-1" class="headerlink" title="优缺点"></a>优缺点</h4><p><strong>优点：</strong></p>
<ul>
<li>低延迟，因为信息直接从一个客户端传递到另一个客户端。</li>
<li>适用于小型游戏，不需要庞大的服务器支持。</li>
</ul>
<p><strong>缺点：</strong></p>
<ul>
<li>难以处理作弊，因为每个客户端都有权更改自己的状态。</li>
<li>对于大型多人在线游戏可能会导致网络流量激增。</li>
</ul>
<h4 id="适合的场景"><a href="#适合的场景" class="headerlink" title="适合的场景"></a>适合的场景</h4><p>小型游戏，例如局域网游戏或小团队合作游戏，不需要中央服务器来维护所有玩家的状态。</p>
<h4 id="案例游戏-1"><a href="#案例游戏-1" class="headerlink" title="案例游戏"></a>案例游戏</h4><ul>
<li><strong>《星际争霸》（StarCraft）</strong>：<br>早期的《星际争霸》在局域网游戏中主要使用点对点通信模型，每个客户端直接与其他客户端通信。</li>
<li><strong>《FIFA》系列（局域网模式）</strong>：<br>体育游戏如《FIFA》系列在其局域网对战模式中，通常使用点对点架构来实现玩家之间的连接。</li>
</ul>
<h3 id="2-1-3-混合型架构"><a href="#2-1-3-混合型架构" class="headerlink" title="2.1.3 混合型架构"></a>2.1.3 混合型架构</h3><p>客户端-服务器与点对点相结合，以兼顾两者的优点。</p>
<h4 id="案例游戏-2"><a href="#案例游戏-2" class="headerlink" title="案例游戏"></a>案例游戏</h4><ul>
<li><strong>《命令与征服》系列</strong>：<br>某些版本的《命令与征服》使用了混合型架构，结合了客户端-服务器和点对点的优势，使得游戏既可以在局域网中高效运行，又可以通过服务器进行更广泛的匹配和竞赛。</li>
<li><strong>《GTA在线》（Grand Theft Auto Online）</strong>：<br>这款游戏在某些方面使用了类似于客户端-服务器的架构，但在其他方面，如玩家间的直接交互，则采用了点对点通信。</li>
</ul>
<h2 id="2-2-同步方式"><a href="#2-2-同步方式" class="headerlink" title="2.2 同步方式"></a>2.2 同步方式</h2><p>在实际游戏开发中，有时也会采用帧同步和状态同步的混合策略，以平衡实时性和效率。</p>
<h3 id="2-2-1-帧同步-Frame-Synchronization"><a href="#2-2-1-帧同步-Frame-Synchronization" class="headerlink" title="2.2.1 帧同步 Frame Synchronization"></a>2.2.1 帧同步 Frame Synchronization</h3><p><strong>概念：</strong><br>在帧同步中，游戏被划分为一系列帧，每一帧都表示一个瞬间的游戏状态。<br>所有玩家在每一帧中发送他们的输入到服务器，服务器进行处理，然后将更新的游戏状态广播给所有玩家。<br>所有客户端根据接收到的状态更新来渲染下一帧。</p>
<p><strong>工作原理：</strong></p>
<ol>
<li><strong>输入收集：</strong> 每个客户端在每一帧中记录玩家的输入，例如键盘按键、鼠标移动等。</li>
<li><strong>输入发送：</strong> 客户端将输入信息发送到服务器。</li>
<li><strong>状态更新：</strong> 服务器根据接收到的所有玩家的输入，计算并更新游戏状态。</li>
<li><strong>状态广播：</strong> 服务器将新的游戏状态广播给所有连接的客户端。</li>
<li><strong>状态接收和渲染：</strong> 客户端接收新状态并使用它来渲染下一帧。</li>
</ol>
<p><strong>优点：</strong></p>
<ul>
<li>玩家在同一帧中看到相同的游戏状态，保持了实时性。</li>
<li>对于快节奏的游戏，帧同步能提供更好的玩家体验。</li>
</ul>
<p><strong>缺点：</strong></p>
<ul>
<li>需要较高的带宽和处理能力，尤其是在大规模多人在线游戏中。</li>
<li>对网络延迟和不稳定性敏感，可能导致不同玩家看到不同的游戏状态。</li>
</ul>
<p><strong>适用于：</strong></p>
<ul>
<li>快节奏的实时多人游戏，如射击游戏、格斗游戏等。</li>
<li>要求玩家在同一时刻看到相同状态的场景。</li>
</ul>
<p>应用场景和游戏案例：</p>
<ol>
<li><strong>实时射击游戏：</strong><br><strong>应用场景：</strong> 快节奏的射击游戏，玩家需要在同一时刻看到相同的敌人和环境状态。<br><strong>游戏案例：</strong> 如《Counter-Strike: Global Offensive》、《Overwatch》等。</li>
<li><strong>格斗游戏：</strong><br><strong>应用场景：</strong> 玩家进行实时对战，需要确保所有玩家看到相同的动作和攻击效果。<br><strong>游戏案例：</strong> 如《街头霸王》、《超级马里奥派对》等。</li>
<li><strong>赛车游戏：</strong><br><strong>应用场景：</strong> 在多人赛车比赛中，所有玩家需要在同一时刻看到相同的赛道和对手位置。<br><strong>游戏案例：</strong> 如《尘埃3》、《极品飞车》系列等。</li>
</ol>
<h3 id="2-2-2-状态同步-State-Synchronization"><a href="#2-2-2-状态同步-State-Synchronization" class="headerlink" title="2.2.2 状态同步 State Synchronization"></a>2.2.2 状态同步 State Synchronization</h3><p><strong>概念：</strong></p>
<ul>
<li>在状态同步中，服务器维护整个游戏世界的状态，而不是每一帧的状态。</li>
<li>客户端定期向服务器请求当前的游戏状态，然后使用接收到的状态更新本地渲染。</li>
<li>不同的客户端在不同的时间可能看到不同的状态，因为他们在不同的时刻请求了状态。</li>
</ul>
<p><strong>工作原理：</strong></p>
<ol>
<li><strong>定期状态请求：</strong> 客户端定期向服务器请求当前的游戏状态。</li>
<li><strong>状态发送：</strong> 服务器响应请求，将当前游戏状态发送给客户端。</li>
<li><strong>状态接收和渲染：</strong> 客户端接收到新状态并使用它来更新本地渲染。</li>
</ol>
<p><strong>优点：</strong></p>
<ul>
<li>相对较低的带宽需求，因为不需要每一帧都广播完整的游戏状态。</li>
<li>对于网络延迟和不稳定性的容忍度较高。</li>
</ul>
<p><strong>缺点：</strong></p>
<ul>
<li>状态同步引入了较大的延迟，因为客户端只能在定期请求状态时才能看到更新。</li>
<li>可能导致不同客户端之间的状态差异，影响玩家之间的互动。</li>
</ul>
<p><strong>适用于：</strong></p>
<ul>
<li>较为宽松的同步要求，例如策略游戏、角色扮演游戏等。</li>
<li>对带宽和延迟有较为严格的限制。</li>
</ul>
<p>应用场景和游戏案例：</p>
<ol>
<li><strong>策略游戏：</strong><br><strong>应用场景：</strong> 缓慢节奏、强调战略和决策的游戏类型，可以容忍一些同步延迟。<br><strong>游戏案例：</strong> 如《星际争霸》、《文明 VI》等。</li>
<li><strong>角色扮演游戏（RPG）：</strong><br><strong>应用场景：</strong> 单人或小型多人团队合作，玩家更注重故事和角色发展。<br><strong>游戏案例：</strong> 如《巫师 3：狂猎》、《上古卷轴 V：天际》等。</li>
<li><strong>虚拟世界游戏：</strong><br><strong>应用场景：</strong> 大型多人在线游戏，强调玩家自由探索和社交互动。<br><strong>游戏案例：</strong> 如《魔兽世界》、《黑色沙漠》等。</li>
</ol>
<h3 id="2-2-3-混合同步（Hybrid-Synchronization）"><a href="#2-2-3-混合同步（Hybrid-Synchronization）" class="headerlink" title="2.2.3 混合同步（Hybrid Synchronization）"></a>2.2.3 混合同步（Hybrid Synchronization）</h3><ul>
<li><strong>概念：</strong> 结合了多种同步技术，根据游戏的不同部分和需求选择不同的同步策略。</li>
<li><strong>适用场景：</strong> 复杂的多人游戏，其中不同游戏元素和互动可能需要不同的同步方法。</li>
<li><strong>优点：</strong> 灵活，可以针对不同游戏场景和需求优化。</li>
<li><strong>缺点：</strong> 实现复杂，需要精细调整和测试。</li>
</ul>
<h1 id="3-游戏引擎网络模块"><a href="#3-游戏引擎网络模块" class="headerlink" title="3. 游戏引擎网络模块"></a>3. 游戏引擎网络模块</h1><h2 id="3-1-Unity官方"><a href="#3-1-Unity官方" class="headerlink" title="3.1 Unity官方"></a>3.1 Unity官方</h2><h3 id="UNET（Unity-Networking）"><a href="#UNET（Unity-Networking）" class="headerlink" title="UNET（Unity Networking）"></a>UNET（Unity Networking）</h3><p>UNET是Unity的早期网络模块，旨在简化多人游戏的开发。然而，在Unity 2019.1版本后，Unity宣布停止对UNET的维护，将重心转向新一代的Networking。</p>
<p>UNET的主要特点和组件包括：</p>
<ul>
<li><strong>NetworkManager：</strong> 用于管理多人游戏的主要组件，处理连接、断开、玩家管理等。</li>
<li><strong>NetworkIdentity：</strong> 标识具有网络同步行为的对象。</li>
<li><strong>NetworkBehaviour：</strong> 通过继承该类，可以在脚本中实现网络同步的行为。</li>
<li><strong>SyncVar：</strong> 用于标记在客户端和服务器之间同步的变量。</li>
<li><strong>RPC（Remote Procedure Call）：</strong> 用于在客户端和服务器之间调用函数。</li>
</ul>
<p>UNET的主要缺点在于其设计相对复杂，可能会在大型项目中引起性能问题，并且在Unity版本升级后停止了官方维护。</p>
<h3 id="Networking（Multiplayer-HLAPI）："><a href="#Networking（Multiplayer-HLAPI）：" class="headerlink" title="Networking（Multiplayer HLAPI）："></a>Networking（Multiplayer HLAPI）：</h3><p>新一代的Networking模块是对UNET的改进和替代，它在Unity 2019.1版本后成为官方推荐的网络解决方案。它通过简化API、提高性能和引入新的概念来改进网络开发体验。</p>
<p>Networking的主要特点和组件包括：</p>
<ul>
<li><strong>NetworkManager：</strong> 与UNET中的NetworkManager类似，用于管理多人游戏的主要组件。</li>
<li><strong>NetworkIdentity：</strong> 标识具有网络同步行为的对象。</li>
<li><strong>NetworkBehaviour：</strong> 通过继承该类，可以在脚本中实现网络同步的行为。</li>
<li><strong>SyncVar：</strong> 仍然用于标记在客户端和服务器之间同步的变量。</li>
<li><strong>Command 和 ClientRpc：</strong> 取代了UNET中的RPC，用于在客户端和服务器之间调用函数。</li>
<li><strong>Spawnable Prefabs：</strong> 管理在不同客户端之间同步生成和销毁的物体。</li>
<li><strong>NetworkTransform：</strong> 管理物体的位置和旋转同步。</li>
<li><strong>NetworkAnimator：</strong> 用于同步动画状态。</li>
</ul>
<p>新一代的Networking模块在性能和易用性上有所提升，因此在选择网络模块时，推荐使用Unity的Networking。具体选择取决于项目需求、Unity版本以及个人或团队的熟悉程度。</p>
<h2 id="3-2-社区框架"><a href="#3-2-社区框架" class="headerlink" title="3.2 社区框架"></a>3.2 社区框架</h2><p>Mirror 是一个基于 Unity 的开源网络框架，专门用于简化和增强多人游戏的开发。它是从 Unity 的 Networking 模块中分离出来的独立项目，旨在提供更好的性能、更简单的 API 和更好的可维护性。</p>
<h1 id="4-多线程"><a href="#4-多线程" class="headerlink" title="4. 多线程"></a>4. 多线程</h1><h1 id="5-同步算法"><a href="#5-同步算法" class="headerlink" title="5. 同步算法"></a>5. 同步算法</h1><h1 id="6-网络优化"><a href="#6-网络优化" class="headerlink" title="6. 网络优化"></a>6. 网络优化</h1><h2 id="6-1-预测与回滚-Prediction-and-Rollback"><a href="#6-1-预测与回滚-Prediction-and-Rollback" class="headerlink" title="6.1 预测与回滚 Prediction and Rollback"></a>6.1 预测与回滚 Prediction and Rollback</h2><h3 id="2-锁步（Lockstep）机制："><a href="#2-锁步（Lockstep）机制：" class="headerlink" title="2. 锁步（Lockstep）机制："></a>2. 锁步（Lockstep）机制：</h3><ul>
<li><strong>概念：</strong> 在锁步机制中，所有的客户端必须在进入下一帧之前达成当前帧的一致状态。这通常通过交换和确认每个玩家的输入来实现。</li>
<li><strong>适用场景：</strong> 需要严格一致性的策略游戏和回合制游戏。</li>
<li><strong>优点：</strong> 确保了游戏状态的完全一致性。</li>
<li><strong>缺点：</strong> 对网络延迟非常敏感，可能导致游戏进度放慢。</li>
</ul>
<h3 id="4-区域同步（Area-of-Interest-Synchronization）："><a href="#4-区域同步（Area-of-Interest-Synchronization）：" class="headerlink" title="4. 区域同步（Area of Interest Synchronization）："></a>4. 区域同步（Area of Interest Synchronization）：</h3><ul>
<li><p><strong>概念：</strong> 只同步玩家当前所在区域或感兴趣区域的状态，而非整个游戏世界。</p>
</li>
<li><p><strong>适用场景：</strong> 大型多人在线游戏（MMORPGs）和广阔的开放世界游戏。</p>
</li>
<li><p><strong>优点：</strong> 减少了需要同步的数据量，提高了效率，特别是在大型游戏世界中。</p>
</li>
<li><p><strong>缺点：</strong> 需要复杂的管理逻辑来处理玩家移动和不同区域之间的交互。</p>
</li>
</ul>
<h1 id="7-项目实战"><a href="#7-项目实战" class="headerlink" title="7. 项目实战"></a>7. 项目实战</h1>
            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E7%BD%91%E7%BB%9C/">网络</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E7%BD%91%E7%BB%9C/">网络</a>
                    
                  </div>
                
              </div>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/01/18/%E6%B8%B8%E6%88%8F%E6%95%B0%E5%80%BC%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%95%B0%E5%AD%A6%E6%A8%A1%E5%9E%8B/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">游戏数值设计与数学模型</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/01/01/DoTween%E9%80%9F%E6%88%90/">
                        <span class="hidden-mobile">DoTween速成</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                
  <script type="text/javascript">
    Fluid.utils.waitElementVisible('comments', function() {
      var light = 'github-light';
      var dark = 'github-dark';
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema === 'dark') {
        schema = dark;
      } else {
        schema = light;
      }
      window.UtterancesThemeLight = light;
      window.UtterancesThemeDark = dark;
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'MycroftCooper/MycroftCooper.github.io');
      s.setAttribute('issue-term', 'pathname');
      
      s.setAttribute('theme', schema);
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    })
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="music-player">
    <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=415793349&auto=0&height=66"></iframe>
  </div>>
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    
      <script  src="/js/lazyload.js" ></script>
    
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>














  
<script src="//cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<script src="//cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script>



<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>



</body>
</html>
